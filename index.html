<html>
  <head>
    <meta charset="UTF-8">
    <!-- <link rel="stylesheet" type="text/css" href="style.css"> -->
  </head>
  <body onkeypress="checkKey(event);">
<div id="app"></div>
<div id="event"></div>
<input id="output" width='200' value="0" readonly placeholder="-1"></input>
<br>
<table>
  <tr>
    <td>
      <button id="ac" onclick="document.getElementById('output').value = 0;console.log('set textarea.value to 0');">c</button>
    </td>
    <td>
      <button id="posinegative" onclick="posinegative();">±</button>
    </td>
    <td>
      <button id="percent" onclick="_100();">%</button>
    </td>
    <td>
      <button id="divide" onclick="addDivide('/');">÷</button>
  </tr>

  <tr>
    <td>
      <button id="seven" onclick="addNum('7');">7</button>
    </td>
    <td>
      <button id="eight" onclick="addNum('8');">8</button>
    </td>
    <td>
      <button id="nine" onclick="addNum('9');">9</button>
    </td>
    <td>
      <button id="times" onclick="addTimes('*');">×</button>
    </td>
  </tr>

  <tr>
    <td>
      <button id="four" onclick="addNum('4');">4</button>
    </td>
    <td>
      <button id="five" onclick="addNum('5');">5</button>
    </td>
    <td>
      <button id="six" onclick="addNum('6');">6</button>
    </td>
    <td>
      <button id="minus" onclick="addMinus('-');">−</button>
    </td>
  </tr>

  <tr>
    <td>
      <button id="one" onclick="addNum('1');">1</button>
    </td>
    <td>
      <button id="two" onclick="addNum('2');">2</button>
    </td>
    <td>
      <button id="three" onclick="addNum('3');">3</button>
    </td>
    <td>
      <button id="plus" onclick="addPlus('+');">+</button>
    </td>
  </tr>

  <tr>
    <td>
      <button id="zero" onclick="addNum(0);">0</button>
    </td>
    <td>
      <button id="dot" onclick="addDot('.');">.</button>
    </td>
    <td>
      <button id="del" onclick="del();">⌫</button>
    </td>
    <td>
      <button id="equal" onclick="equal();">=</button>
    </td>
  </tr>
</table>
<script>
// Write Javascript code!
const appDiv = document.getElementById('app');
appDiv.innerHTML = `<h1 onclick="document.documentElement.requestFullscreen();" id="header">Calculator</h1>`;
//const key = event.key
var _equal = false
var operator = 0;
var dot = false;
function del() {
  const textarea = document.getElementById('output');
  //if (textarea.value.slice(-2, -1) == "*" || textarea.value.slice(-2, -1) == "/" || textarea.value.slice(-2, -1) == "-" || textarea.value.slice(-2, -1) == "+") {
  //  if (textarea.value.indexOf(".") != -1) {
  //    dot = true;
  //  }
  //  textarea.value += " "
  //  
  //}
  if (textarea.value != 0) {
    if (textarea.value.length != 1 || textarea.value == 0){
      textarea.value = textarea.value.slice(0, -1);
    } else {
      textarea.value = "0";
    }
  } else if (textarea.value != "0") {
    textarea.value = textarea.value.slice(0, -1);
  } else if (textarea.value.slice(-2, -1) == "*" || textarea.value.slice(-2, -1) == "/" || textarea.value.slice(-2, -1) == "-" || textarea.value.slice(-2, -1) == "+") {
    if (textarea.value.indexOf(".") != -1) {
      dot = true;
    }
    textarea.value = textarea.value.slice(0, -1)
    
  }
  textarea.value = textarea.value.trim()
  console.log("set textarea.value to " + textarea.value)
}

function addNum(n) {
  const textarea = document.getElementById('output');
  if (_equal) {
    textarea.value = n;
  }
  if (textarea.value != "0" && !_equal){
    if (textarea.value.slice(-1) == "*" || textarea.value.slice(-1) == "/" || textarea.value.slice(-1) == "-" || textarea.value.slice(-1) == "+") {
      textarea.value += " ";
    }
    textarea.value += n;
  } else if (n != 0 || _equal){
    textarea.value = n;
    _equal = false;
  }
  console.log("set textarea.value to " + textarea.value);
  _equal = false;
}

function checkKey(event) {
  var keyVal = event.key;
  var keyType = typeof keyVal
  switch (keyVal) {
    case "c":
    case "C":
      document.getElementById("ac").click();
      break;
    case "%":
      document.getElementById("percent").click();
      break;
    case "/":
      document.getElementById("divide").click();
      break;
    case "1":
      document.getElementById("one").click();
      break;
    case "2":
      document.getElementById("two").click();
      break;
    case "3":
      document.getElementById("three").click();
      break;
    case "4":
      document.getElementById("four").click();
      break;
    case "5":
      document.getElementById("five").click();
      break;
    case "6":
      document.getElementById("six").click();
      break;
    case "7":
      document.getElementById("seven").click();
      break;
    case "8":
      document.getElementById("eight").click();
      break;
    case "9":
      document.getElementById("nine").click();
      break;
    case "0":
      document.getElementById("zero").click();
      break;
    case ".":
      document.getElementById("dot").click();
      break;
    case "Backspace":
      document.getElementById("del").click();
      break;
    case "Enter":
    case "=":
      document.getElementById("equal").click();
      break;
    case "+":
      document.getElementById("plus").click();
      break;
    case "-":
      document.getElementById("minus").click();
      break;
    case "f":
    case "F":
      document.getElementById("header").click();
  }
}

function addDot(n){
  if (n === undefined) {
    n = "h";
  }
  const textarea = document.getElementById('output');
  if (n == ".") {
    if (!dot) {
      textarea.value += n;
      dot = false;
      _equal = false;
        } else if (textarea.placeholder.indexOf(n) == -1) {
      textarea.placeholder = 1;
    }
  }
  console.log("set textarea.value to " + textarea.value);
}

function addTimes(n){
  _equal = false;
  if (n === undefined) {
    n = "h";
  }
  const textarea = document.getElementById('output');
  if (n != ".") {
    if (textarea.value.indexOf("*") == -1 && textarea.value.indexOf("/") == -1 && textarea.value.indexOf(" -") == -1 && textarea.value.indexOf("+") == -1) {
      textarea.value += " "+n;
    } else if (textarea.value.indexOf(n) == -1) {
      
    }
  }
  console.log("set textarea.value to " + textarea.value);
}

function addDivide(n){
  _equal = false;
  if (n === undefined) {
    n = "h";
  }
  const textarea = document.getElementById('output');
  if (n != ".") {
    if (textarea.value.indexOf("*") == -1 && textarea.value.indexOf("/") == -1 && textarea.value.indexOf(" -") == -1 && textarea.value.indexOf("+") == -1) {
      textarea.value += " "+n;
    } else if (textarea.value.indexOf(n) == -1) {
      
    }
  }
  console.log("set textarea.value to " + textarea.value);
}

function addPlus(n){
  _equal = false;
  if (n === undefined) {
    n = "h";
  }
  const textarea = document.getElementById('output');
  if (n != ".") {
    if (textarea.value.indexOf("*") == -1 && textarea.value.indexOf("/") == -1 && textarea.value.indexOf(" -") == -1 && textarea.value.indexOf("+") == -1) {
      textarea.value += " "+n;
    } else if (textarea.value.indexOf(n) == -1) {
      
    }
  }
  console.log("set textarea.value to " + textarea.value);
}

function addMinus(n){
  _equal = false;
  if (n === undefined) {
    n = "h";
  }
  const textarea = document.getElementById('output');
  if (n != ".") {
    if (textarea.value.indexOf("*") == -1 && textarea.value.indexOf("/") == -1 && textarea.value.indexOf(" -") == -1 && textarea.value.indexOf("+") == -1) {
      textarea.value += " "+n;
    } else if (textarea.value.indexOf(n) == -1) {
      
    }
  }
  console.log("set textarea.value to " + textarea.value);
}

function equal() {
  const textarea = document.getElementById('output');
  input = textarea.value.split(" ");
  switch (input[1]) {
    case "*":
      textarea.value = input[0] * input[2];
      _equal = true;
      break;
    case "/":
      textarea.value = input[0] / input[2];
      _equal = true;
      break;
    case "+":
      textarea.value = Number(input[0]) + Number(input[2]);
      _equal = true;
      break;
    case "-":
      textarea.value = input[0] - input[2];
      _equal = true;
      break;
  }  
  console.log("set textarea.value to " + textarea.value);
}

function posinegative() {
  _equal = false;
  const textarea = document.getElementById('output');
  var isOp = [textarea.value.indexOf("/"), textarea.value.indexOf("*"), textarea.value.indexOf(" -"), textarea.value.indexOf("+"), textarea.value.indexOf("-")];
  if (isOp[0] + isOp[1] + isOp[2] + isOp[3] == -4) {
    if (isOp[4] == -1) {
      textarea.value = "-"+textarea.value
    } else if (isOp[4] == 0){
      textarea.value = textarea.value.slice(1)
    }
  }
  console.log("set textarea.value to " + textarea.value);
}

function _100() {
  _equal = false;
  const textarea = document.getElementById('output');
  var isOp = [textarea.value.indexOf("/"), textarea.value.indexOf("*"), textarea.value.indexOf(" -"), textarea.value.indexOf("+"), textarea.value.indexOf("-")];
  if (isOp[0] + isOp[1] + isOp[2] + isOp[3] == -4) {
    textarea.value = textarea.value / 100;
  }
  console.log("set textarea.value to " + textarea.value);
}
</script>



<!--0C±%÷789×456−123+0,⌫=-->
  </body>
</html>